<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either
 * version 3 of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/

 -->
<metatype:MetaData xmlns:metatype="http://www.osgi.org/xmlns/metatype/v1.2.0">

    <OCD name="OIDC Configuration" id="org.codice.ddf.security.oidc.client.HandlerConfiguration">

        <AD name="IdP Type" id="idpType" type="String" required="true" default="Keycloak"
            description="IdP type to use">
            <Option label="Keycloak" value="Keycloak"/>
            <Option label="Google" value="Google"/>
            <Option label="Azure" value="Azure"/>
            <Option label="Generic" value="Generic"/>
        </AD>

        <AD name="Client ID" id="clientId" required="true" type="String" default="ddf-client"
            description="Unique ID for the client, this may be provided by the Identity Provider.">

        </AD>

        <AD name="Realm/Tenant" id="realm" type="String" default=""
            description="Realm to use for a multi-tenant environment. This is required for Keycloak or Azure">
        </AD>

        <AD name="Secret" id="secret" type="String" required="true" default=""
            description="This value must match the value set on the Identity Provider.">

        </AD>

        <AD name="Discovery URI" id="discoveryURI" type="String" required="true" default=""
            description="Discovery URI for fetching OP metadata (http://openid.net/specs/openid-connect-discovery-1_0.html)">

        </AD>

        <AD name="Base URI" id="baseUri" type="String" required="true" default=""
            description="Base URI for IdP. Do not fill out both this and the Discovery URI. Only one is needed depending on the IdP in use.">

        </AD>

        <AD name="Scope" id="scope" type="String" required="true" default=""
            description="Space separated scopes">

        </AD>

        <AD name="Use Nonce" id="useNonce" type="Boolean" default="true"
            description="Whether or not to use nonce in JWT">

        </AD>

        <AD name="Flow" id="responseType" type="String" required="true" default="id_token"
            description="Type of flow to use.">
            <Option label="code" value="code" />
            <Option label="id_token" value="id_token" />
            <Option label="id_token token" value="id_token token" />
            <Option label="code id_token" value="code id_token" />
            <Option label="code token" value="code token" />
            <Option label="code id_token token" value="code id_token token" />
        </AD>
        
        <AD name="Mode" id="responseMode" type="String" default=""
            description="Mode. Leave blank if you are unsure of the value to use.">
            <Option label="blank" value=""/>
            <Option label="form_post" value="form_post"/>
        </AD>

    </OCD>

    <Designate pid="org.codice.ddf.security.oidc.client.HandlerConfiguration">
        <Object ocdref="org.codice.ddf.security.oidc.client.HandlerConfiguration"/>
    </Designate>

</metatype:MetaData>